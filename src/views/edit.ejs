<!DOCTYPE html>
<html>
  <head>
    <title>Edit Sync</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
  </head>
  <body class="p-4">
    <div class="container" style="max-width: 720px">
      <h1 class="mb-4">✏️ Edit Sheet Sync</h1>

      <form action="/syncs/<%= sync.id %>/edit" method="POST" novalidate>
        <div class="mb-3">
          <label class="form-label">Title<span class="text-danger">*</span></label>
          <input
            type="text"
            name="title"
            class="form-control"
            value="<%= sync.title %>"
            required
          />
        </div>

        <div class="mb-3">
          <label class="form-label">Description</label>
          <textarea name="description" class="form-control" rows="2"><%= sync.description || '' %></textarea>
        </div>

        <div class="mb-3">
          <label class="form-label">Sheet ID<span class="text-danger">*</span></label>
          <input
            type="text"
            name="sheet_id"
            class="form-control"
            value="<%= sync.sheet_id %>"
            required
          />
        </div>

        <div class="mb-3">
          <label class="form-label">Range<span class="text-danger">*</span></label>
          <input
            type="text"
            name="range"
            class="form-control"
            value="<%= sync.range %>"
            required
          />
        </div>

        <div class="mb-3">
          <label class="form-label">Interval<span class="text-danger">*</span></label>
          <div class="input-group">
            <input
              type="number"
              name="interval_value"
              class="form-control"
              min="1"
              value="<%= sync.interval.match(/\d+/)?.[0] || '' %>"
              required
            />
            <select name="interval_unit" class="form-select" required>
              <option value="m" <%= sync.interval.endsWith('m') ? 'selected' : '' %>>Minutes</option>
              <option value="h" <%= sync.interval.endsWith('h') ? 'selected' : '' %>>Hours</option>
              <option value="d" <%= sync.interval.endsWith('d') ? 'selected' : '' %>>Days</option>
            </select>
          </div>
        </div>

        <div class="mb-3">
          <label class="form-label">Target Table</label>
          <input
            type="text"
            class="form-control"
            value="<%= sync.target_table %>"
            disabled
          />
          <div class="form-text text-muted">Target table cannot be changed after creation.</div>
        </div>

        <button type="submit" class="btn btn-success">💾 Save</button>
        <a href="/" class="btn btn-secondary ms-2">Cancel</a>
      </form>
    </div>
  </body>
</html>
